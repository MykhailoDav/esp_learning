# –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç - I2C Scanner

## üöÄ –®–≤–∏–¥–∫–∏–π –∑–∞–ø—É—Å–∫ –∑–∞ 3 –∫—Ä–æ–∫–∏

### 1Ô∏è‚É£ –ü—ñ–¥–∫–ª—é—á—ñ—Ç—å I2C –ø—Ä–∏—Å—Ç—Ä—ñ–π

```
ESP32 GPIO 21 (SDA) ‚îÄ‚îÄ‚îÄ‚îÄ SDA –ø—Ä–∏—Å—Ç—Ä–æ—é
ESP32 GPIO 22 (SCL) ‚îÄ‚îÄ‚îÄ‚îÄ SCL –ø—Ä–∏—Å—Ç—Ä–æ—é  
ESP32 GND          ‚îÄ‚îÄ‚îÄ‚îÄ GND –ø—Ä–∏—Å—Ç—Ä–æ—é
ESP32 3.3V         ‚îÄ‚îÄ‚îÄ‚îÄ VCC –ø—Ä–∏—Å—Ç—Ä–æ—é
```

### 2Ô∏è‚É£ –ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ –∫–æ–¥

```bash
cd /Users/yurkin/Documents/study/esp/i2c_search
pio run -t upload
pio device monitor
```

### 3Ô∏è‚É£ –î–∏–≤—ñ—Ç—å—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏!

–í–∏ –ø–æ–±–∞—á–∏—Ç–µ —Ç–∞–±–ª–∏—Ü—é –∑ –∞–¥—Ä–µ—Å–∞–º–∏ –∑–Ω–∞–π–¥–µ–Ω–∏—Ö –ø—Ä–∏—Å—Ç—Ä–æ—ó–≤ —Ç–∞ —ó—Ö –Ω–∞–∑–≤–∞–º–∏.

---

## üìö –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏

```
lib/i2c_scanner/
‚îú‚îÄ‚îÄ i2c_scanner.h              # API –∑–∞–≥–æ–ª–æ–≤–∫–∏
‚îú‚îÄ‚îÄ i2c_scanner.c              # –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è
‚îú‚îÄ‚îÄ README.md                  # –ü–æ–≤–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
‚îî‚îÄ‚îÄ examples/                  # –ü—Ä–∏–∫–ª–∞–¥–∏ –∫–æ–¥—É
    ‚îú‚îÄ‚îÄ example_basic.c        # –ü—Ä–æ—Å—Ç–∏–π –ø—Ä–∏–∫–ª–∞–¥
    ‚îú‚îÄ‚îÄ example_advanced.c     # –†–æ–∑—à–∏—Ä–µ–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó
    ‚îî‚îÄ‚îÄ example_multiple_buses.c # –î–≤—ñ I2C —à–∏–Ω–∏
```

---

## üîß –ë–∞–∑–æ–≤–µ API

```c
// –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è (–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –≤ app_main)
i2c_scanner_config_t config = I2C_SCANNER_CONFIG_DEFAULT();
i2c_scanner_init(&config);

// –°–∫–∞–Ω—É–≤–∞–Ω–Ω—è —à–∏–Ω–∏
uint8_t count = i2c_scanner_scan_bus(I2C_NUM_0);

// –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—Ä–∏—Å—Ç—Ä–æ—é
if (i2c_scanner_check_device(I2C_NUM_0, 0x3C) == ESP_OK) {
    // –ü—Ä–∏—Å—Ç—Ä—ñ–π –∑–Ω–∞–π–¥–µ–Ω–æ!
}

// –û—Ç—Ä–∏–º–∞—Ç–∏ –Ω–∞–∑–≤—É –ø—Ä–∏—Å—Ç—Ä–æ—é
const char* name = i2c_scanner_get_device_name(0x3C);
```

---

## üéØ –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è GPIO

### –í–∞—Ä—ñ–∞–Ω—Ç 1: –í main.c

```c
i2c_scanner_config_t config = I2C_SCANNER_CONFIG_DEFAULT();
config.sda_io = GPIO_NUM_18;  // –ó–º—ñ–Ω–∏—Ç–∏ SDA
config.scl_io = GPIO_NUM_19;  // –ó–º—ñ–Ω–∏—Ç–∏ SCL
i2c_scanner_init(&config);
```

### –í–∞—Ä—ñ–∞–Ω—Ç 2: –í i2c_scanner.h (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º)

```c
#define I2C_SCANNER_CONFIG_DEFAULT() {
    .sda_io = GPIO_NUM_21,    // <-- —Ç—É—Ç
    .scl_io = GPIO_NUM_22,    // <-- —Ç—É—Ç
    ...
}
```

---

## üìä –ü–æ–ø—É–ª—è—Ä–Ω—ñ I2C –ø—Ä–∏—Å—Ç—Ä–æ—ó

| –ü—Ä–∏—Å—Ç—Ä—ñ–π | –ê–¥—Ä–µ—Å–∞ | –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è |
|----------|--------|-------------|
| SSD1306 OLED | 0x3C, 0x3D | –î–∏—Å–ø–ª–µ–π |
| MPU6050 | 0x68, 0x69 | –ê–∫—Å–µ–ª–µ—Ä–æ–º–µ—Ç—Ä + –≥—ñ—Ä–æ—Å–∫–æ–ø |
| DS3231 | 0x68 | –ì–æ–¥–∏–Ω–Ω–∏–∫ —Ä–µ–∞–ª—å–Ω–æ–≥–æ —á–∞—Å—É |
| BMP280/BME280 | 0x76, 0x77 | –î–∞—Ç—á–∏–∫ —Ç–∏—Å–∫—É/—Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∏ |
| ADS1115 | 0x48-0x4B | 16-–±—ñ—Ç –ê–¶–ü |
| PCF8574 | 0x20-0x27 | I/O —Ä–æ–∑—à–∏—Ä—é–≤–∞—á |
| AT24C32 EEPROM | 0x50-0x57 | –ü–∞–º'—è—Ç—å |

---

## ‚ö° –ö–æ—Ä–∏—Å–Ω—ñ –∫–æ–º–∞–Ω–¥–∏

```bash
# –ó–±—ñ—Ä–∫–∞
pio run

# –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
pio run -t upload

# –ú–æ–Ω—ñ—Ç–æ—Ä
pio device monitor

# –í—Å–µ —Ä–∞–∑–æ–º
pio run -t upload && pio device monitor

# –û—á–∏—Å—Ç–∏—Ç–∏ –ø—Ä–æ–µ–∫—Ç
pio run -t clean
```

---

## üêõ –ü—Ä–æ–±–ª–µ–º–∏?

**–ü—Ä–∏—Å—Ç—Ä–æ—ó –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ:**
- ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∑'—î–¥–Ω–∞–Ω–Ω—è
- ‚úÖ –î–æ–¥–∞–π—Ç–µ pull-up —Ä–µ–∑–∏—Å—Ç–æ—Ä–∏ 4.7kŒ© (—è–∫—â–æ —ó—Ö –Ω–µ–º–∞—î –Ω–∞ –º–æ–¥—É–ª—ñ)
- ‚úÖ –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è —â–æ –∂–∏–≤–ª–µ–Ω–Ω—è –ø—Ä–∞–≤–∏–ª—å–Ω–µ (3.3V)

**–ü–æ–º–∏–ª–∫–∞ –∫–æ–º–ø—ñ–ª—è—Ü—ñ—ó:**
- ‚úÖ –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å VS Code
- ‚úÖ –í–∏–∫–æ–Ω–∞–π—Ç–µ `pio run -t clean && pio run`

**–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ñ GPIO:**
- ‚úÖ –ó–º—ñ–Ω—ñ—Ç—å –≤ –∫–æ–¥—ñ (–¥–∏–≤. —Ä–æ–∑–¥—ñ–ª "–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è GPIO")

---

## üìñ –ë—ñ–ª—å—à–µ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó

- –ü–æ–≤–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è: `lib/i2c_scanner/README.md`
- –ü—Ä–∏–∫–ª–∞–¥–∏ –∫–æ–¥—É: `lib/i2c_scanner/examples/`
- –ì–æ–ª–æ–≤–Ω–∏–π README: `README.md`

---

**–£—Å–ø—ñ—à–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è! üéâ**
